---
title: Internationalization (i18n)
service: chess-app
status: active
last_reviewed: 2025-11-17
type: architecture
---

# Internationalization (i18n)

## Overview

The Chess App provides comprehensive internationalization support for 7 languages using a context-based translation system with JSON locale files.

## Supported Languages

- **English** (en) - Default
- **Spanish** (es)
- **French** (fr)
- **German** (de)
- **Russian** (ru)
- **Chinese** (zh)
- **Japanese** (ja)

## Architecture

### Components

1. **I18nContext.tsx**: React Context that provides translation functions and locale management
2. **index.ts**: Translation utilities and locale loader
3. **locales/**: JSON files containing translations for each language

### Translation Flow

```
Component → useI18n() hook → I18nContext
                                ↓
                         Translation utilities
                                ↓
                         locale JSON files
```

## Usage

### In React Components

```typescript
import { useI18n } from '../i18n';

export const GameBoard: React.FC = () => {
  const { t, locale, setLocale } = useI18n();

  return (
    <View>
      <Text>{t('game.play')}</Text>
      <Picker
        selectedValue={locale}
        onValueChange={(value) => setLocale(value)}
      >
        {/* Locale options */}
      </Picker>
    </View>
  );
};
```

### Basic Translation

```typescript
const { t } = useI18n();
const text = t('game.play'); // Returns "Play" or translated equivalent
```

### Translation with Defaults

```typescript
const { t } = useI18n();
const text = t('unknown.key', 'Default Text');
// Returns "Default Text" if key doesn't exist
```

### Interpolation (Variable Substitution)

```typescript
const { ti } = useI18n();
const message = ti('game.moveCount', { count: 5 });
// If translation is "Move {{count}}", returns "Move 5"
```

### Changing Locale

```typescript
const { setLocale } = useI18n();
setLocale('es'); // Switch to Spanish
```

## Translation Structure

Translations are organized in a nested structure:

```json
{
  "app": {
    "title": "Chessmate",
    "description": "Play chess online"
  },
  "game": {
    "play": "Play",
    "puzzle": "Puzzle"
  }
}
```

Access nested keys using dot notation:

```typescript
t('app.title')     // "Chessmate"
t('game.play')     // "Play"
```

## Adding New Translations

### Step 1: Add Key to Base Language (en.json)

```json
{
  "newFeature": {
    "title": "New Feature Title",
    "description": "Description here"
  }
}
```

### Step 2: Add Translations to All Locale Files

For each language file (es.json, fr.json, etc.), add the same keys with translated values:

```json
{
  "newFeature": {
    "title": "Título de Nueva Función",
    "description": "Descripción aquí"
  }
}
```

### Step 3: Use in Components

```typescript
const title = t('newFeature.title');
const description = t('newFeature.description');
```

## Locale Files Structure

Each locale file (`en.json`, `es.json`, etc.) contains the complete translation dictionary:

**Common Sections**:
- `app` - Application-level strings
- `common` - Reusable strings (Yes, No, OK, Cancel)
- `game` - Game-related terms
- `auth` - Authentication strings
- `puzzle` - Puzzle-specific terms

## Utility Functions

### getTranslation(locale, key, defaultValue?)

Fetch a translation for a specific locale:

```typescript
import { getTranslation } from '../i18n';

const text = getTranslation('es', 'game.play', 'Play');
// Returns "Jugar" if available, otherwise "Play"
```

### interpolateTranslation(text, variables)

Replace placeholders in translation strings:

```typescript
import { interpolateTranslation } from '../i18n';

const result = interpolateTranslation('Hello {{name}}', { name: 'Alice' });
// Returns "Hello Alice"
```

### getSupportedLocales()

Get list of all supported locales:

```typescript
import { getSupportedLocales } from '../i18n';

const locales = getSupportedLocales();
// Returns ['en', 'es', 'fr', 'de', 'ru', 'zh', 'ja']
```

### isLocaleSupported(locale)

Check if a locale is supported:

```typescript
import { isLocaleSupported } from '../i18n';

if (isLocaleSupported('es')) {
  setLocale('es');
}
```

## Setup

### Wrap App with Provider

In `src/App.tsx`:

```tsx
import { I18nProvider } from './i18n';

export default function App() {
  return (
    <I18nProvider defaultLocale="en">
      <YourAppComponents />
    </I18nProvider>
  );
}
```

### Specify Default Locale

```tsx
<I18nProvider defaultLocale="es">
  {/* App will start in Spanish */}
</I18nProvider>
```

## Best Practices

### 1. Use Translation Keys Consistently

```typescript
// ✅ Good: Use dot notation keys
t('game.play')
t('game.puzzle')

// ❌ Avoid: Hardcoded strings
'Play'
'Puzzle'
```

### 2. Provide Fallback Defaults

```typescript
// ✅ Good: Provide default
t('unknown.key', 'Default value')

// ❌ Risky: No fallback
t('unknown.key')
```

### 3. Use Interpolation for Dynamic Content

```typescript
// ✅ Good: Use interpolation
ti('game.moves', { count: moves.length })

// ❌ Avoid: String concatenation
t('game.move') + ': ' + moves.length
```

### 4. Organize Keys Logically

Group related translations:

```json
{
  "game": {
    "play": "...",
    "moves": "...",
    "time": "..."
  }
}
```

## Performance Considerations

- Translations are loaded synchronously from JSON files
- No lazy loading; all locales are available immediately
- Minimal overhead; getTranslation uses object traversal
- Locale switching updates React context; triggers re-render only for consuming components

## Future Enhancements

1. **Dynamic Locale Loading**: Load locales on-demand
2. **Pluralization**: Support plural forms (e.g., "1 move" vs "5 moves")
3. **Date/Time Formatting**: Locale-aware date formatting
4. **RTL Support**: Right-to-left language support
5. **Translation Management UI**: Admin panel to edit translations
6. **Namespace Splitting**: Organize translations into feature-based files
