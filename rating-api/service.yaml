name: rating-api
kind: api
language: python
runtime: python3.11

description: Player rating service (Glicko-2) with idempotent ingestions and event outbox

commands:
  dev: "poetry run uvicorn app.main:app --reload --host 0.0.0.0 --port 8013"
  test: "poetry run pytest tests/ -v --cov=app"
  build: "poetry build"
  lint: "poetry run flake8 app/ && poetry run black --check app/"
  migrate: "poetry run alembic upgrade head"
  logs: "docker logs rating-api --tail ${lines}"

dependencies:
  dev: []
  test: []
  build: []
  deploy: []

infra:
  requires:
    - database
  optional:
    - cache
    - message-bus

tags:
  - ratings
  - matchmaking
  - leaderboard
